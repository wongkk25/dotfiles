source ./colors.sh
source ./variables.sh

sketchybar --bar \
  position=top \
  notch_display_height=35 \
  color=$BLACK \
  padding_right=$BAR_PADDING \
	padding_left=$BAR_PADDING

default=(
  updates=when_shown
  icon.font="$FONT:Bold:13.0"
  label.font="$FONT:Bold:13.0"
  icon.color="$TEXT_COLOR"
  label.color="$TEXT_COLOR"
  icon.padding_left="$ITEM_PADDING"
  icon.padding_right="$ICON_LABEL_PADDING"
  label.padding_left="$ICON_LABEL_PADDING"
  label.padding_right="$ITEM_PADDING"
  background.color="$BASE"
  background.corner_radius=$CORNER_RADIUS
  background.padding_left="$GROUP_PADDING"
  background.padding_right="$GROUP_PADDING"
  background.height=28
)
sketchybar --default "${default[@]}"

source $ITEM_DIR/spaces.sh
source $ITEM_DIR/front_app.sh
source $ITEM_DIR/clock.sh
# source $ITEM_DIR/volume.sh
source $ITEM_DIR/battery.sh
source $ITEM_DIR/cpu.sh
# source $ITEM_DIR/music.sh

STATS_SENSORS="Control Center,Sensors_mini"
STATS_RAM="Control Center,RAM_memory" # TODO build one using vm_stat

                                  
# sketchybar --add  "$STATS_BATTERY" right \
sketchybar --set battery background.padding_left=0 \
                         background.padding_right=0
sketchybar --add cpu right \
           --set cpu background.padding_right=0 \
                     background.padding_left=0
sketchybar --add alias "$STATS_RAM" right \
           --set       "$STATS_RAM" label.drawing="off" \
                                    icon.drawing="off" \
                                    background.padding_right=0
sketchybar --add bracket status cpu battery "$STATS_RAM"

sketchybar --hotload true

##### Force all scripts to run the first time (never do this in a script) #####
sketchybar --update
